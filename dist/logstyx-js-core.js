var q=Object.defineProperty;var j=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var O=(t,e,r)=>e in t?q(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,l=(t,e)=>{for(var r in e||(e={}))I.call(e,r)&&O(t,r,e[r]);if(j)for(var r of j(e))J.call(e,r)&&O(t,r,e[r]);return t};var b=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var h=(t,e,r)=>new Promise((n,y)=>{var p=s=>{try{i(r.next(s))}catch(c){y(c)}},f=s=>{try{i(r.throw(s))}catch(c){y(c)}},i=s=>s.done?n(s.value):Promise.resolve(s.value).then(p,f);i((r=r.apply(t,e)).next())});var x=b(A=>{A.sanitizeObject=t=>Object.entries(t).reduce((e,[r,n])=>(n!=null&&n!==""&&!(Array.isArray(n)&&n.length===0)&&!(typeof n=="object"&&!Array.isArray(n)&&Object.keys(n).length===0&&n.constructor===Object)&&(e[r]=n),e),{});A.normalizeArgs=t=>Array.isArray(t)?{message:JSON.stringify(t)}:typeof t=="object"?t:{message:String(t)}});var z=b(S=>{var{sanitizeObject:d,normalizeArgs:L}=x();S.useLogstyx=t=>{let{projectId:e,apiKey:r,appid:n,endpoint:y="https://api.logstyx.com/v1/logs",device:p,signatureFunc:f}=t,i=d({appid:n});function s(o){i=l(l({},i),o)}function c(o){if(Array.isArray(o))for(let m of o)delete i[m];else i={}}function a(K){return h(this,arguments,function*(o,m={}){try{let g=d({timestamp:new Date().toISOString(),level:o,projectId:e,device:p,context:d(i),data:d(L(m))}),u={"Content-Type":"application/json"};if(typeof f=="function"){let{timestamp:C,signature:w}=f(e,r,g);u.signature=w,u.timestamp=C}return fetch(y,{method:"POST",body:JSON.stringify(g),headers:u})}catch(g){console.error(g)}})}return{info:o=>a("info",o),warning:o=>a("warning",o),error:o=>a("error",o),critical:o=>a("critical",o),send:a,setContext:s,clearContext:c}}});var{useLogstyx:N}=z();module.exports=t=>N(t);
